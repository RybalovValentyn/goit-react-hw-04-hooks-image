(this["webpackJsonpgoit-react-hw-04-hooks-image"]=this["webpackJsonpgoit-react-hw-04-hooks-image"]||[]).push([[0],{14:function(e,t,a){e.exports={ImageGalleryItem:"imageitem_ImageGalleryItem__3ySKB",ImageGalleryItemImage:"imageitem_ImageGalleryItemImage__3V7FK"}},15:function(e,t,a){e.exports={Overlay:"modal_Overlay__1dx4Z",Modal:"modal_Modal__2bep5",Button:"modal_Button__33Uuc"}},18:function(e,t,a){e.exports={ImageGallery:"imageGallery_ImageGallery__2b2bg"}},19:function(e,t,a){e.exports={Button:"button_Button__3R5UC"}},20:function(e,t,a){e.exports={App:"api_App__zqH5l"}},48:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(4),r=a.n(o),i=a(3),s=a(5),u=a.n(s),l=a(11),m=(a(25),a(1));function j(e){var t=e.searchPics,a=Object(n.useState)(""),c=Object(i.a)(a,2),o=c[0],r=c[1];return Object(m.jsx)("header",{className:u.a.Searchbar,children:Object(m.jsxs)("form",{className:u.a.SearchForm,onSubmit:function(e){e.preventDefault(),""!==o.trim()?(t(o),r(" ")):l.b.error("enter search immage")},children:[Object(m.jsx)("button",{type:"submit",className:u.a.SearchFormButton,children:Object(m.jsx)("span",{className:u.a.SearchFormButtonLabel,children:"Search"})}),Object(m.jsx)("input",{className:u.a.SearchFormInput,type:"text",placeholder:"Search images and photos",value:o,onChange:function(e){r(e.target.value.toLowerCase())}})]})})}var h=a(16),b=a(8),d=a(9),p=a(12),g=a(10),O=a(17),f=a.n(O),_=(a(47),function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"instant"})}},{key:"render",value:function(){return Object(m.jsx)(f.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3})}}]),a}(n.Component)),v=a(14),x=a.n(v);function y(e){var t=e.image;return Object(m.jsx)(m.Fragment,{children:t.map((function(e){return Object(m.jsx)("li",{className:x.a.ImageGalleryItem,children:Object(m.jsx)("img",{src:e.webformatURL,alt:e.tags,className:x.a.ImageGalleryItemImage})},e.id)}))})}var S=a(18),I=a.n(S);function w(e){var t=e.images,a=e.imageId;return Object(m.jsx)("ul",{className:I.a.ImageGallery,onClick:function(e){e.target.currentSrc&&a(t.find((function(t){return t.webformatURL===e.target.src})))},children:Object(m.jsx)(y,{image:t})})}var k=a(19),B=a.n(k);function F(e){var t=e.loadMore;return Object(m.jsx)("button",{onClick:t,type:"button",className:B.a.Button,children:"Load more"})}var E="idle",C="pending",N="resolved",L="rejected",G="https://pixabay.com/api/?q=",M="22353010-e1640ec84a31ac5dbc2cb01be";function D(e){var t,a=e.imageSearch,c=e.imageId,o=Object(n.useState)(E),r=Object(i.a)(o,2),s=r[0],u=r[1],l=Object(n.useState)(""),j=Object(i.a)(l,2),b=j[0],d=j[1],p=Object(n.useState)([]),g=Object(i.a)(p,2),O=g[0],f=g[1],v=Object(n.useState)(null),x=Object(i.a)(v,2),y=x[0],S=x[1],I=Object(n.useState)(1),k=Object(i.a)(I,2),B=k[0],D=k[1];return Object(n.useEffect)((function(){a&&(D(1),u(C),setTimeout((function(){fetch("".concat(G).concat(a,"&page=").concat(B,"&key=").concat(M,"&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.ok?e.json():Promise.reject(new Error("not name ".concat(a)))})).then((function(e){f(e.hits),u(N)})).catch(S(L)),u(E)}),1e3))}),[a]),Object(n.useEffect)((function(){b&&c(b)}),[b]),Object(n.useEffect)((function(){a&&1!==B&&setTimeout((function(){fetch("".concat(G).concat(a,"&page=").concat(B,"&key=").concat(M,"&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.ok?e.json():Promise.reject(new Error("not name ".concat(a)))})).then((function(e){f((function(t){return[].concat(Object(h.a)(t),Object(h.a)(e.hits))})),u(N),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch(S(L)),u(E)}),1e3)}),[B]),s===E?Object(m.jsx)(m.Fragment,{}):(null!==(t=s===C)&&void 0!==t?t:O)?Object(m.jsx)(_,{}):s===N?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(w,{images:O,imageId:function(e){return d(e)},status:s}),s===C&&Object(m.jsx)(_,{}),O.length>=12&&Object(m.jsx)(F,{loadMore:function(){return D((function(e){return e+1}))}})]}):s===L?Object(m.jsxs)("p",{children:[y.message,a," \u043d\u0435\u0442\u0443"]}):void 0}var P=a(15),U=a.n(P),K=document.querySelector("#modal-root"),T=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).handleKeyDown=function(t){"Escape"===t.code&&(console.log("\u041d\u0430\u0436\u0430\u043b\u0438 ESC, \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u0440\u044b\u0442\u044c \u043c\u043e\u0434\u0430\u043b\u043a\u0443"),e.props.onClose())},e.handleBackdropClick=function(t){"DIV"===t.target.nodeName&&e.props.onClose()},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("click",this.handleBackdropClick)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("click",this.handleBackdropClick)}},{key:"render",value:function(){return Object(o.createPortal)(Object(m.jsx)("div",{className:U.a.Overlay,children:Object(m.jsx)("div",{className:U.a.Modal,children:Object(m.jsx)("img",{src:this.props.imageId.largeImageURL,alt:this.props.imageId.tags})})}),K)}}]),a}(n.Component),q=a(20),A=a.n(q);function H(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),r=Object(i.a)(o,2),s=r[0],u=r[1],h=Object(n.useState)(""),b=Object(i.a)(h,2),d=b[0],p=b[1];return Object(m.jsxs)("div",{className:A.a.App,children:[Object(m.jsx)(j,{searchPics:function(e){return c(e)}}),Object(m.jsx)(l.a,{autoClose:3e3}),Object(m.jsx)(D,{imageSearch:a,imageId:function(e){p(e),console.log(e),u(!0)}}),s&&Object(m.jsx)(T,{onClose:function(){return u(!s)},imageId:d})]})}r.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(H,{})}),document.getElementById("root"))},5:function(e,t,a){e.exports={Searchbar:"searchBar_Searchbar__3OH-7",SearchForm:"searchBar_SearchForm__2lTx7",SearchFormButton:"searchBar_SearchFormButton__q1rNi",SearchFormButtonLabel:"searchBar_SearchFormButtonLabel__1XXEo",SearchFormInput:"searchBar_SearchFormInput__FEetX"}}},[[48,1,2]]]);
//# sourceMappingURL=main.dc1288d0.chunk.js.map